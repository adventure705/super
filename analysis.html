<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YouTube ì±„ë„ ì‹¬ì¸µ ë¶„ì„ê¸° (ë‹¤í¬ ëª¨ë“œ)</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* ì»¤ìŠ¤í…€ ìŠ¤í¬ë¡¤ë°” (ë‹¤í¬ëª¨ë“œì— ë§ì¶¤) */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #1a1a2e; /* ë°°ê²½ìƒ‰ */
        }
        ::-webkit-scrollbar-thumb {
            background: #383b6e; /* ìŠ¤í¬ë¡¤ë°” ìƒ‰ìƒ */
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #e94560; /* í˜¸ë²„ ì‹œ ê°•ì¡°ìƒ‰ */
        }

        /* í°íŠ¸ ì„¤ì • (Inter í°íŠ¸ ì‚¬ìš©) */
        body {
            font-family: 'Inter', sans-serif;
        }
        /* í…Œì´ë¸” ì…€ ë‚´ë¶€ì— íƒœê·¸ê°€ ë§ì„ ê²½ìš° ì¤„ë°”ê¿ˆì„ í—ˆìš© */
        #videoListTableBody td:nth-child(11) { 
            white-space: normal;
        }
        /* ìº˜ë¦°ë” ì…€ ìŠ¤íƒ€ì¼ */
        .calendar-cell {
            width: 100%; 
            padding: 4px;
            text-align: center;
            font-size: 0.75rem;
            height: 40px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            border: 1px solid #383b6e;
            border-radius: 4px;
            cursor: pointer; /* í´ë¦­ ê°€ëŠ¥í•˜ë„ë¡ ë³€ê²½ */
            transition: background-color 0.2s;
        }
        /* Shorts ìŠ¤í¬ë¡¤ ì»¨í…Œì´ë„ˆ */
        .shorts-scroll-container {
            position: relative; /* í™”ì‚´í‘œ ë°°ì¹˜ë¥¼ ìœ„í•´ */
        }
        .shorts-scroll-container::-webkit-scrollbar {
            height: 8px;
        }
        .shorts-content {
            overflow-x: auto;
            scroll-behavior: smooth;
            white-space: nowrap;
        }
        .scroll-button {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            z-index: 10;
            background: rgba(40, 42, 77, 0.8); /* card-bg semi-transparent */
            border-radius: 9999px;
            padding: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
            transition: background 0.3s;
            display: none; /* Mobile hidden */
        }
        @media (min-width: 768px) {
            .scroll-button {
                display: block; /* PC show */
            }
        }
        /* í•„í„° ë©”ë‰´ ìŠ¤íƒ€ì¼ */
        .filter-dropdown {
            z-index: 50;
            min-width: 250px;
        }
        /* API ì„¤ì • ëª¨ë‹¬ ìŠ¤íƒ€ì¼ */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 100;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .modal-content {
            background-color: #1a1a2e;
            padding: 2rem;
            border-radius: 1rem;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.5);
            max-width: 90%;
            max-height: 90%;
            overflow-y: auto;
        }
    </style>
    <script>
        // Tailwind Config for custom colors
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'bg-dark': '#1a1a2e',      // 1. Deep Blue/Purple Dark Background
                        'primary-accent': '#e94560', // 2. Vivid Red/Pink Accent
                        'text-light': '#f8f8f8',    // 3. Off-White/Light Gray Text
                        'card-bg': '#282a4d',       // 4. Slightly Lighter Dark Blue Card Background
                        'success-status': '#6aff7b', // 5. Light Green Success/Status
                        'warning-star': '#fbbf24', // Yellow for stars
                    },
                }
            }
        }
    </script>
</head>
<body class="bg-bg-dark text-text-light min-h-screen transition-colors duration-500">

    <!-- API ì„¤ì • ëª¨ë‹¬ (Modal) -->
    <div id="apiSettingsModal" class="modal hidden">
        <div class="modal-content w-full md:w-2/3 lg:w-1/2">
            <h2 class="text-2xl font-bold mb-4 text-primary-accent border-b border-primary-accent/50 pb-2">API í‚¤ ì„¤ì • ë° ê´€ë¦¬</h2>
            
            <!-- í‚¤ ì¶”ê°€ ì…ë ¥ í¼ -->
            <div class="bg-card-bg p-4 rounded-lg mb-4">
                <h3 class="text-lg font-semibold mb-3">ìƒˆ í‚¤ ì¶”ê°€</h3>
                <div class="flex flex-col gap-3">
                    <input type="text" id="newKeyName" placeholder="í‚¤ ì´ë¦„ (ì˜ˆ: ê¸°ë³¸ í‚¤)" class="p-2 rounded-lg bg-bg-dark border border-card-bg text-text-light">
                    <input type="password" id="newKeyValue" placeholder="YouTube Data API Key" class="p-2 rounded-lg bg-bg-dark border border-card-bg text-text-light">
                    <button onclick="saveApiKey(event)" class="py-2 bg-success-status text-bg-dark font-bold rounded-lg hover:bg-success-status/80">í‚¤ ì €ì¥</button>
                </div>
            </div>

            <!-- ì €ì¥ëœ í‚¤ ëª©ë¡ -->
            <div class="bg-card-bg p-4 rounded-lg">
                <h3 class="text-lg font-semibold mb-3 border-b border-text-light/10 pb-1">ì €ì¥ëœ í‚¤ ëª©ë¡ (<span id="apiKeyCount">0</span>ê°œ)</h3>
                <div id="apiKeyList" class="space-y-2">
                    <!-- Keys rendered here by JS -->
                </div>
                <p id="noKeysMessage" class="text-text-light/50 text-sm mt-2 hidden">ì €ì¥ëœ í‚¤ê°€ ì—†ìŠµë‹ˆë‹¤.</p>
            </div>
            
            <!-- ë‹«ê¸° ë²„íŠ¼ì„ ì˜¤ë¥¸ìª½ìœ¼ë¡œ ë°°ì¹˜ -->
            <div class="flex justify-end">
                <button onclick="document.getElementById('apiSettingsModal').classList.add('hidden');" class="mt-4 py-2 px-4 bg-primary-accent text-white rounded-lg hover:bg-primary-accent/80">ë‹«ê¸°</button>
            </div>
            <!-- FIX: Local Storage ì‚¬ìš© ì‹œ ë¬¸êµ¬ ëª…í™•íˆ ë³€ê²½ -->
            <p class="text-xs text-text-light/50 mt-4">ë°ì´í„°ëŠ” Firebase Firestoreì— ì‚¬ìš©ì ê³ ìœ  IDë¡œ ì €ì¥ë©ë‹ˆë‹¤. (Firebase ë¯¸ì„¤ì • ì‹œ **í˜„ì¬ ë¸Œë¼ìš°ì €ì—ë§Œ** ì„ì‹œ ì €ì¥ë©ë‹ˆë‹¤.)</p>
        </div>
    </div>
    <!-- END API Settings Modal -->

    <!-- í‚¤ ì‚­ì œ í™•ì¸ ëª¨ë‹¬ -->
    <div id="deleteConfirmModal" class="modal hidden">
        <div class="modal-content w-80">
            <h3 class="text-xl font-bold text-primary-accent mb-4">í‚¤ ì‚­ì œ í™•ì¸</h3>
            <p class="text-sm text-text-light/80 mb-4">
                ì •ë§ë¡œ '<span id="keyNameToDelete" class="font-bold text-success-status"></span>' í‚¤ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ? ì´ ì‘ì—…ì€ ë˜ëŒë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.
            </p>
            <div class="flex justify-end space-x-3">
                <button onclick="document.getElementById('deleteConfirmModal').classList.add('hidden')" class="py-2 px-4 bg-card-bg border border-text-light/20 text-text-light rounded-lg hover:bg-card-bg/50">ì·¨ì†Œ</button>
                <button id="confirmDeleteBtn" class="py-2 px-4 bg-primary-accent text-white font-bold rounded-lg hover:bg-primary-accent/80">ì‚­ì œ í™•ì¸</button>
            </div>
        </div>
    </div>
    <!-- END Delete Confirm Modal -->

    <!-- í—¤ë” ì„¹ì…˜ -->
    <header id="top" class="p-4 sm:p-6 bg-card-bg shadow-lg sticky top-0 z-10 rounded-b-xl">
        <h1 class="text-2xl sm:text-3xl font-extrabold text-primary-accent text-center">
            YouTube ì±„ë„ ì‹¬ì¸µ ë¶„ì„ê¸°
        </h1>
    </header>

    <!-- ë©”ì¸ ì½˜í…ì¸  ì˜ì—­ -->
    <main class="container mx-auto p-4 sm:p-6 lg:p-10">

        <!-- ì…ë ¥ ë° ì œì–´ íŒ¨ë„ -->
        <section class="bg-card-bg p-6 rounded-xl shadow-2xl mb-8">
            <h2 class="text-xl font-semibold mb-4 border-b border-primary-accent/50 pb-2">ë¶„ì„ ì„¤ì •</h2>
            
            <!-- API í‚¤ ì„¤ì • ë²„íŠ¼ -->
            <div class="mb-4">
                <label for="activeApiKeyDisplay" class="block text-sm font-medium mb-1">í™œì„±í™”ëœ API Key</label>
                <div class="flex flex-col sm:flex-row gap-2 items-center">
                    <input type="text" id="activeApiKeyDisplay" readonly value="í‚¤ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”." 
                            class="w-full p-3 rounded-lg bg-bg-dark border border-card-bg focus:border-success-status text-success-status transition duration-200 cursor-default" placeholder="í™œì„±í™”ëœ í‚¤ê°€ ì—†ìŠµë‹ˆë‹¤.">
                    
                    <button id="apiSettingsBtn" onclick="openApiSettings(event)"
                            class="w-full sm:w-auto px-4 py-3 bg-primary-accent text-white font-medium rounded-lg hover:bg-primary-accent/80 transition duration-300 whitespace-nowrap">
                        ğŸ”‘ API ì„¤ì •
                    </button>
                </div>
            </div>

            <!-- ì±„ë„ ë§í¬/ID ì…ë ¥ -->
            <div class="mb-6">
                <label for="channelId" class="block text-sm font-medium mb-1">ì±„ë„ ID ë˜ëŠ” ì˜ìƒ ë§í¬ (ì˜ˆ: @username, youtu.be/...) </label>
                <input type="text" id="channelId" placeholder="ì±„ë„ ID, í•¸ë“¤, ë˜ëŠ” ì˜ìƒ ë§í¬ë¥¼ ì…ë ¥í•˜ì„¸ìš”" 
                        class="w-full p-3 rounded-lg bg-bg-dark border border-card-bg focus:border-primary-accent focus:ring-1 focus:ring-primary-accent text-text-light transition duration-200">
            </div>

            <!-- ë¶„ì„ ë²„íŠ¼ -->
            <button id="analyzeButton" 
                    class="w-full py-3 px-4 bg-primary-accent hover:bg-primary-accent/80 text-white font-bold rounded-xl transition duration-300 shadow-lg shadow-primary-accent/30 disabled:opacity-50"
                    onclick="startAnalysis()">
                <span id="buttonText">ì±„ë„ ë¶„ì„ ì‹œì‘</span>
            </button>

            <!-- ìƒíƒœ ë©”ì‹œì§€ -->
            <p id="statusMessage" class="mt-4 text-center text-sm font-medium"></p>
        </section>

        <!-- ë¶„ì„ ê²°ê³¼ í‘œì‹œ ì˜ì—­ -->
        <section id="resultsSection" class="hidden">
            <h2 class="text-2xl font-bold mb-6 text-primary-accent">ë¶„ì„ ê²°ê³¼ ìš”ì•½ (ì •ëŸ‰ì  ì§€í‘œ)</h2>
            
            <!-- ì±„ë„ ê¸°ë³¸ ì •ë³´ ì¹´ë“œ -->
            <div id="channelInfo" class="grid md:grid-cols-2 gap-6 mb-8">
                <!-- ì •ë³´ëŠ” JSë¥¼ í†µí•´ ì±„ì›Œì§‘ë‹ˆë‹¤ -->
            </div>

            <!-- í†µê³„ ì¹´ë“œ (ì „ì²´) -->
            <div class="grid grid-cols-1 sm:grid-cols-3 gap-4 text-center mb-4">
                <div class="bg-card-bg p-5 rounded-xl shadow-xl">
                    <p class="text-3xl font-bold text-success-status" id="statSubscribers">0</p>
                    <p class="text-sm mt-1 text-text-light/80">êµ¬ë…ì ìˆ˜</p>
                </div>
                <div class="bg-card-bg p-5 rounded-xl shadow-xl">
                    <p class="text-3xl font-bold text-success-status" id="statViews">0</p>
                    <p class="text-sm mt-1 text-text-light/80">ì´ ì¡°íšŒìˆ˜</p>
                </div>
                <div class="bg-card-bg p-5 rounded-xl shadow-xl">
                    <p class="text-3xl font-bold text-success-status" id="statVideos">0</p>
                    <p class="text-sm mt-1 text-text-light/80">ì´ ì˜ìƒ ìˆ˜</p>
                </div>
            </div>

            <!-- í†µê³„ ì¹´ë“œ (90ì¼ í‰ê· ) - NEW -->
            <div class="grid grid-cols-1 sm:grid-cols-3 gap-4 text-center mb-8">
                <div class="bg-card-bg p-4 rounded-xl shadow-xl border border-primary-accent/30">
                    <p class="text-xl font-bold text-primary-accent" id="avgViews90Days">0</p>
                    <p class="text-xs mt-1 text-text-light/70">90ì¼ í‰ê·  ì¡°íšŒìˆ˜</p>
                </div>
                <div class="bg-card-bg p-4 rounded-xl shadow-xl border border-primary-accent/30">
                    <p class="text-xl font-bold text-primary-accent" id="avgLikes90Days">0</p>
                    <p class="text-xs mt-1 text-text-light/70">90ì¼ í‰ê·  ì¢‹ì•„ìš” ìˆ˜</p>
                </div>
                <div class="bg-card-bg p-4 rounded-xl shadow-xl border border-primary-accent/30">
                    <p class="text-xl font-bold text-primary-accent" id="avgComments90Days">0</p>
                    <p class="text-xs mt-1 text-text-light/70">90ì¼ í‰ê·  ëŒ“ê¸€ ìˆ˜</p>
                </div>
            </div>


            <!-- ë²¤ì¹˜ë§ˆí‚¹ ì‹¬ì¸µ ë¶„ì„ ê°€ì´ë“œ (ì •ì„±ì  ë¶„ì„ ì˜ì—­) -->
            <h2 class="text-2xl font-bold mb-6 text-primary-accent mt-10">ğŸ› ï¸ ì‹¬ì¸µ ë²¤ì¹˜ë§ˆí‚¹ ê°€ì´ë“œ (ì§ì ‘ ë¶„ì„ í•„ìš”)</h2>
            <p class="text-sm text-text-light/80 mb-6">ì•„ë˜ í•­ëª©ë“¤ì€ APIë¡œ ì œê³µë˜ì§€ ì•ŠëŠ” <b>ì„±ê³µ ì „ëµ í•µì‹¬ ì˜ì—­</b>ì…ë‹ˆë‹¤. ìƒë‹¨ì˜ ì •ëŸ‰ì  ë°ì´í„°ì™€ í•¨ê»˜ ì±„ë„ì„ ì§ì ‘ ê´€ì°°í•˜ë©° ë¶„ì„í•´ ë³´ì„¸ìš”.</p>

            <div class="grid md:grid-cols-2 gap-6 mb-8">
                <!-- ì½˜í…ì¸  ë° ê¸°íšë ¥ ë¶„ì„ (2ë‹¨ê³„) -->
                <div class="bg-card-bg p-6 rounded-xl shadow-xl">
                    <h3 class="text-lg font-bold text-success-status mb-3">ğŸ’¡ 2ë‹¨ê³„: ì½˜í…ì¸  ê¸°íšë ¥ ë¶„ì„</h3>
                    <ul class="list-disc ml-5 text-sm space-y-2 text-text-light/80">
                        <li><b>í‚¬ëŸ¬ ì½˜í…ì¸ :</b> ì˜ìƒë“¤ì„ ì£¼ì œë³„ë¡œ ë¶„ë¥˜í•˜ì—¬ ì±„ë„ì˜ ì£¼ë ¥ ì½˜í…ì¸ (ê°€ì¥ ì„±ê³¼ ì¢‹ì€)ë¥¼ ì‹ë³„í•©ë‹ˆë‹¤.</li>
                        <li><b>í¬ë§· ë° ê¸¸ì´:</b> ì„±ê³µì ì¸ ì˜ìƒì˜ í‰ê·  ê¸¸ì´ì™€ í¬ë§· ìœ í˜•(Vlog, íŠœí† ë¦¬ì–¼ ë“±)ì„ ê¸°ë¡í•©ë‹ˆë‹¤.</li>
                        <li><b>ì˜ìƒ êµ¬ì¡°:</b> ê¸°ìŠ¹ì „ê²° ë“± ì˜ìƒ ë‚´ë¶€ì˜ ì¼ê´€ëœ êµ¬ì¡°ë¥¼ ë¶„ì„í•©ë‹ˆë‹¤.</li>
                        <li><b>ì „ë‹¬ ë°©ì‹:</b> ê°ì • ìœ ë°œ, ì •ë³´ ì „ë‹¬ ë“± í•µì‹¬ ì „ë‹¬ ìš”ì†Œë¥¼ ì •ì˜í•©ë‹ˆë‹¤.</li>
                        <li><b>ì°¨ë³„í™”:</b> ì´ ì±„ë„ë§Œì´ ê°€ì§„ ê³ ìœ í•œ ê´€ì ì´ë‚˜ ì •ë³´ ì „ë‹¬ ë°©ì‹ì„ ì •ì˜í•©ë‹ˆë‹¤.</li>
                    </ul>
                </div>

                <!-- ì‹œê°/í¸ì§‘ ìŠ¤íƒ€ì¼ ë¶„ì„ (3ë‹¨ê³„) -->
                <div class="bg-card-bg p-6 rounded-xl shadow-xl">
                    <h3 class="text-lg font-bold text-success-status mb-3">ğŸ¬ 3ë‹¨ê³„: ì‹œê°/í¸ì§‘ ìŠ¤íƒ€ì¼ ë¶„ì„</h3>
                    <ul class="list-disc ml-5 text-sm space-y-2 text-text-light/80">
                        <li><b>ì¸ë„¤ì¼ ì „ëµ:</b> ì£¼ëœ ìƒ‰ìƒ, í°íŠ¸, ê¶ê¸ˆì¦ì„ ìœ ë°œí•˜ëŠ” ë¬¸êµ¬ ìŠ¤íƒ€ì¼ì„ íŒŒì•…í•©ë‹ˆë‹¤.</li>
                        <li><b>í¸ì§‘ ì†ë„:</b> ì»· ì „í™˜ ì†ë„, í™”ë©´ ë¶„í• , ì§€ë£¨í•¨ì„ ì¤„ì´ëŠ” í¸ì§‘ ê¸°ë²•ì„ ë¶„ì„í•©ë‹ˆë‹¤.</li>
                        <li>ğŸ—£ï¸ <b>ì‚¬ìš´ë“œ/í˜¸ìŠ¤íŠ¸:</b> BGM ì„ íƒ ê¸°ì¤€, íš¨ê³¼ìŒ ì‚¬ìš©ì˜ ì ì ˆì„±, í˜¸ìŠ¤íŠ¸ì˜ í†¤ì•¤ë§¤ë„ˆë¥¼ ë¶„ì„í•©ë‹ˆë‹¤.</li>
                    </ul>
                </div>

                <!-- ì°¸ì—¬ ë° SEO ë¶„ì„ (4, 5ë‹¨ê³„) -->
                <div class="bg-card-bg p-6 rounded-xl shadow-xl md:col-span-2">
                    <h3 class="text-lg font-bold text-success-status mb-3">ğŸ” 4 & 5ë‹¨ê³„: ì°¸ì—¬, ì»¤ë®¤ë‹ˆí‹° ë° SEO ë¶„ì„</h3>
                    <ul class="list-disc ml-5 text-sm space-y-2 text-text-light/80">
                        <li><b>ì°¸ì—¬ìœ¨ ì¶”ì •:</b> ì•„ë˜ ë°ì´í„°(ì¡°íšŒìˆ˜, ì¢‹ì•„ìš”, ëŒ“ê¸€)ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì°¸ì—¬ìœ¨ì„ ì¶”ì •í•©ë‹ˆë‹¤.</li>
                        <li><b>ëŒ“ê¸€ ë°˜ì‘:
